{% extends "base.html" %}
{% block title %}{{ coll_name }} - {{ db_name }} - QA Browser{% endblock %}

{% block breadcrumb %}
<span class="sep">/</span>
<a href="/db/{{ db_name }}">{{ db_name }}</a>
<span class="sep">/</span>
<span>{{ coll_name }}</span>
{% endblock %}

{% block content %}
<div style="display:flex; align-items:center; gap:1rem; margin-bottom:1rem">
    <h1 style="margin:0">{{ coll_name }}</h1>
    <span class="badge {% if is_edge %}badge-edge{% else %}badge-doc{% endif %}">{{ "edge" if is_edge else "document" }}</span>
    <span style="color:var(--text-muted)">{{ "{:,}".format(total) }} records</span>
</div>

<details class="card">
    <summary>Field Coverage Stats</summary>
    <div hx-get="/db/{{ db_name }}/collection/{{ coll_name }}/stats"
         hx-trigger="toggle once from:closest details"
         hx-swap="innerHTML">
        <span class="htmx-indicator">Loading stats...</span>
    </div>
</details>

<div class="card" style="overflow-x:auto">
    <div id="table-container">
        {% include "collection_rows.html" %}
    </div>
</div>
{% endblock %}