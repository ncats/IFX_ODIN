{% extends "base.html" %}
{% block title %}Projects – {{ db_name }}{% endblock %}
{% block breadcrumb %}
<span class="sep">/</span><span>Projects</span>
{% endblock %}

{% block content %}
<div style="display:flex; align-items:center; gap:1rem; margin-bottom:1.25rem">
    <h1 style="margin:0">Projects</h1>
    <span class="badge badge-mysql">{{ db_name }}</span>
    <span style="color:var(--text-muted)">{{ "{:,}".format(total) }} projects</span>
</div>

<form method="get" action="{{ root_path }}/demo/projects"
      hx-get="{{ root_path }}/demo/projects" hx-target="#proj-results"
      hx-swap="innerHTML" hx-push-url="true"
      style="display:flex; gap:0.5rem; margin-bottom:1rem; align-items:center">
    <input type="text" name="search" value="{{ search }}" placeholder="Search by name or description…"
           style="padding:0.4rem 0.75rem; border:1px solid var(--border); border-radius:4px;
                  background:var(--bg-card); color:var(--text); width:340px; font-size:0.9rem">
    <button type="submit" style="padding:0.4rem 1rem; background:var(--accent); color:#fff;
            border:none; border-radius:4px; cursor:pointer; font-size:0.9rem">Search</button>
    {% if search %}
    <a href="{{ root_path }}/demo/projects" style="color:var(--text-muted); font-size:0.9rem; text-decoration:none">✕ clear</a>
    {% endif %}
</form>

<div class="card" style="overflow-x:auto">
    <div id="proj-results">{% include "demo_projects_rows.html" %}</div>
</div>
{% endblock %}
